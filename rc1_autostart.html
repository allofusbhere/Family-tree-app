<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SwipeTree RC1 (Auto)</title>
  <!-- hotfix MUST load before main script -->
  <script src="hotfix_anchor.js"></script>
  <script src="script.js"></script>
  <link rel="stylesheet" href="parents_fix.css">
</head>
<body>
  <input id="startId" type="text" value="100000" style="position:absolute;left:280px;top:90px;width:300px;">
  <button id="btnStart" onclick="start()" style="position:absolute;left:600px;top:90px;">Start</button>
  <div id="anchor" style="margin-top:160px;font-size:48px;text-align:center;">Anchor</div>

  <script>
    (function autoStart(){
      // read ?id= query, default 100000, enforce 6+ digits by padding with trailing zeros
      const p = new URLSearchParams(location.search);
      let id = (p.get('id') || '100000').replace(/[^0-9]/g, '');
      while (id.length < 6) id += '0';
      const input = document.getElementById('startId');
      if (input) input.value = id;

      // poll for global start() then invoke
      let tries = 0;
      const t = setInterval(() => {
        tries++;
        if (typeof window.start === 'function') {
          clearInterval(t);
          try { window.start(); } catch(e){ console.error('start() failed', e); }
        }
        if (tries > 60) { clearInterval(t); console.warn('start() not present'); }
      }, 50);
    })();
  </script>
</body>
</html>
