
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>SwipeTree rc2d — stable test page</title>
  <style>
    /* Minimal layout shell; does not change your main CSS files */
    body { margin:0; background:#0c0e12; color:#e6e6e6; font: 16px/1.4 system-ui, -apple-system, Segoe UI, Roboto, sans-serif; }
    header { padding: 8px 12px; font-weight: 700; }
    .container { padding: 12px; max-width: 1100px; margin: 0 auto; }
    .row { display: grid; grid-template-columns: auto 1fr; gap: 12px; align-items: center; }
    #anchor { width: min(42vw, 42vh); height: auto; display: block; background:#111; border-radius: 12px; }
    .hint { opacity: .7; font-size: 0.9rem; margin-top: 6px; }
    input[type="text"]{ padding:8px 10px; border-radius:12px; border:1px solid #333; background:#12161c; color:#e6e6e6; }
    button{ padding:8px 12px; border-radius:12px; border:1px solid #333; background:#19202a; color:#fff; font-weight:700; cursor:pointer;}
    button:active{ transform: translateY(1px); }
  </style>
</head>
<body>
  <header>SwipeTree rc2d</header>
  <div class="container">
    <div class="row">
      <div>
        <img id="anchor" alt="Anchor" src="100000.jpg" />
        <div class="hint">Swipe: ◀ siblings • ▶ spouse • ▲ parents • ▼ children</div>
      </div>
      <div>
        <label>Enter ID: <input id="idInput" type="text" placeholder="e.g., 100000" /></label>
        <button id="startBtn">Start</button>
        <div id="status" class="hint"></div>
      </div>
    </div>
  </div>

  <!-- Try to load your existing core logic if present; ignore if missing -->
  <script src="script.v132.js" defer onerror="console.warn('script.v132.js not found; continuing with app-hook only')"></script>
  <!-- Our stable add-on -->
  <script src="app-hook.js?v=rc2d" defer></script>
  <script>
    // Minimal ID loader to swap anchor image; core swipe logic remains in your script.v132.js
    document.addEventListener('DOMContentLoaded', function(){
      const input = document.getElementById('idInput');
      const btn = document.getElementById('startBtn');
      const img = document.getElementById('anchor');
      const status = document.getElementById('status');

      function setId(id){
        if(!/^[0-9]+(\.1)?$/.test(id)){ status.textContent='Invalid ID format'; return; }
        img.src = id + '.jpg';
        status.textContent = 'Anchor set to ' + id;
        try {
          const url = new URL(window.location);
          url.hash = '#id=' + id;
          history.replaceState(null, '', url);
        } catch(e){}
      }
      btn.addEventListener('click', ()=>{ const id = input.value.trim() || '100000'; setId(id); });
      // On load: check hash
      const m = location.hash.match(/#id=([0-9]+(?:\.1)?)/);
      setId(m ? m[1] : '100000');
    });
  </script>
</body>
</html>
