<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>SwipeTree RC1 (Auto + Loader)</title>
  <!-- Ensure hotfix patches before app -->
  <script src="hotfix_anchor.js"></script>
  <script src="script.js"></script>
  <link rel="stylesheet" href="parents_fix.css">
  <style>
    body { background:#111; color:#fff; margin:0; }
    #anchor { display:flex; align-items:center; justify-content:center; height:100vh; }
    #anchor img { max-width:95vw; max-height:85vh; border-radius:8px; box-shadow:0 6px 20px rgba(0,0,0,.4); }
    #startId { position:absolute; left:280px; top:24px; width:320px; padding:.5rem .75rem; font-size:20px; }
    #btnStart { position:absolute; left:620px; top:20px; font-size:20px; padding:.4rem .8rem; }
  </style>
</head>
<body>
  <input id="startId" type="text" value="100000">
  <button id="btnStart" onclick="start()">Start</button>
  <div id="anchor">Anchor</div>

  <!-- Minimal loader shim: wraps start() and loads {id}.jpg -->
  <script>
    (function(){
      function getId(){
        const p = new URLSearchParams(location.search);
        let id = (document.getElementById('startId')?.value || p.get('id') || '100000').replace(/[^0-9]/g, '');
        while (id.length < 6) id += '0';
        return id;
      }
      function load(id){
        const holder = document.getElementById('anchor');
        holder.innerHTML = '';
        const img = document.createElement('img');
        img.id = 'anchorImage';
        img.alt = 'anchor '+id;
        img.src = id + '.jpg'; // relative to the page path
        img.addEventListener('error', () => {
          holder.textContent = 'Image not found: ' + img.src;
          console.error('Image 404:', img.src);
        });
        holder.appendChild(img);
      }
      // Wrap any existing start()
      const origStart = window.start;
      window.start = function(){
        try { if (typeof origStart === 'function') origStart(); } catch(e){ console.warn('orig start error', e); }
        load(getId());
      };
      // Auto-run if ?id is present
      if (new URLSearchParams(location.search).has('id')) {
        // small delay to allow script.js init
        setTimeout(() => window.start(), 60);
      }
    })();
  </script>
</body>
</html>
